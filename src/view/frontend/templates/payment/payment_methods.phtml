<?php declare(strict_types=1);

use MageHx\MageTemplateUtils\Model\Esc;
use MageHx\MageTemplateUtils\Model\ViewModelProvider;
use MageHx\MahxCheckout\Block\PaymentMethods;

/** @var PaymentMethods $block */
/** @var string $nonce */
/** @var Esc $esc */
/** @var string $formKey */
/** @var Closure $classNames */
/** @var ViewModelProvider $viewModelProvider */
?>
<div id="payment-methods-section" class="<?= $classNames(['checkout-payment-method relative', 'mt-12' => $block->isVirtualCart()]) ?>">
    <?= $block->getChildHtml('formTitle') ?>
    <div class="overflow-x-auto">
        <form
            id="payment-methods-form"
            x-data="PaymentMethodsForm"
            data-validation="<?= $esc->htmlAttr($block->getValidationJson()) ?>"
        >
            <?= $formKey ?>
            <div class="space-y-2">
                <?php foreach ($block->getPaymentMethods() as $method): ?>
                    <?= $block->getPaymentHtml($method) ?>
                <?php endforeach; ?>
            </div>
        </form>
    </div>
    <?= $block->getChildHtml('loader') ?>
    <?= $block->getChildHtml('luma_js') ?>
</div>
